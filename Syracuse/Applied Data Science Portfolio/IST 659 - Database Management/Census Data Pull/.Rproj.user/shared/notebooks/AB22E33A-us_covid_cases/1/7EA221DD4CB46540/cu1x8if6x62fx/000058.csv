"0",""
"0",""
"0","covid_summary <- db_covid %>% group_by(date) %>% "
"0","                      summarise(across(cases:deaths, ~ sum(.x, na.rm = TRUE))) %>% "
"0","                      left_join(covid_hospital, by = c(""date""=""date""))"
"0",""
"0","covid_summary <- covid_summary %>% "
"0","                      mutate(across(c(cases, deaths, hospitizations), list(rolling = ~ slider::slide_dbl(., sum, .before = 27)))) %>% "
"0","                      mutate(deaths_rolling_norm = lag(deaths_rolling, 17),"
"0","                             hospitizations_rolling_norm = lag(hospitizations_rolling, 11),"
"0","                             deaths_per_cases = deaths_rolling_norm / cases_rolling,"
"0","                             hospitizations_per_cases = hospitizations_rolling_norm / cases_rolling,"
"0","                             hospitizations_per_deaths = hospitizations_rolling_norm / deaths_rolling_norm,"
"0","                             hospitizations_per_cases = if_else(hospitizations_per_cases<0,0,hospitizations_per_cases))"
"0",""
"0",""
